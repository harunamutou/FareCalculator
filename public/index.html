<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>経路検索</title>
<style>
body{font-family:sans-serif;margin:40px;}
input,button{padding:8px;margin:4px;}
#result{margin-top:20px;}
.card{padding:12px;border-radius:8px;margin:8px 0;color:#333;background:#f9f9f9;box-shadow:0 2px 6px rgba(0,0,0,0.1);}
.card-error{color:red;background:#ffe6e6;}
</style>
</head>
<body>
<h1>経路検索</h1>
<input id="start" placeholder="出発駅">
<input id="end" placeholder="到着駅">
<input id="via1" placeholder="経由1（任意）">
<input id="via2" placeholder="経由2（任意）">
<input id="via3" placeholder="経由3（任意）">
<button id="search">検索</button>
<div id="result"></div>

<script>
document.getElementById("search").onclick=async()=>{
  const start=document.getElementById("start").value;
  const end=document.getElementById("end").value;
  const via=[document.getElementById("via1").value,document.getElementById("via2").value,document.getElementById("via3").value].filter(Boolean);
  const res=await fetch("/search",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({start,end,via})});
  const data=await res.json();
  const resultDiv=document.getElementById("result");
  if(data.error){
    resultDiv.innerHTML=`<div class="card card-error">エラー: ${data.error}</div>`;
  }else{
    resultDiv.innerHTML=`<div class="card">経路: ${data.path.join(" → ")}<br>距離: ${data.distance} km<br>運賃: ${data.fare} 円</div>`;
  }
}
</script>
</body>
</html>
